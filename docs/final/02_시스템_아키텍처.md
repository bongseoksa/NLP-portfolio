# 02. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

> **ë¬¸ì„œ ë²„ì „**: v1.0
> **ì‘ì„±ì¼**: 2026-01-05
> **ì´ì „ ë¬¸ì„œ**: [01_ê¸°ìˆ _ìŠ¤íƒ.md](./01_ê¸°ìˆ _ìŠ¤íƒ.md)
> **ë‹¤ìŒ ë¬¸ì„œ**: [03_í™˜ê²½_ì„¤ì •.md](./03_í™˜ê²½_ì„¤ì •.md)

---

## ğŸ“‹ ëª©ì°¨

1. [ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì„±ë„](#1-ì „ì²´-ì‹œìŠ¤í…œ-êµ¬ì„±ë„)
2. [ì„¤ê³„ ì›ì¹™](#2-ì„¤ê³„-ì›ì¹™)
3. [ë°ì´í„° íë¦„](#3-ë°ì´í„°-íë¦„)
4. [ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜](#4-ì»´í¬ë„ŒíŠ¸-ì•„í‚¤í…ì²˜)
5. [ë°°í¬ ì•„í‚¤í…ì²˜](#5-ë°°í¬-ì•„í‚¤í…ì²˜)

---

## 1. ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì„±ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        GitHub Actions (CI)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Unified Embedding Pipeline (ì£¼ê°„ ìë™ ì‹¤í–‰)              â”‚   â”‚
â”‚  â”‚  1. target-repos.json ë¡œë“œ                               â”‚   â”‚
â”‚  â”‚  2. GitHub API â†’ ì»¤ë°‹ + diff + íŒŒì¼ ìˆ˜ì§‘                â”‚   â”‚
â”‚  â”‚  3. Supabase â†’ Q&A íˆìŠ¤í† ë¦¬ ì¡°íšŒ                        â”‚   â”‚
â”‚  â”‚  4. Hugging Face ì„ë² ë”© ìƒì„± (384d)                     â”‚   â”‚
â”‚  â”‚  5. Supabase pgvector ì €ì¥                               â”‚   â”‚
â”‚  â”‚  6. ë°ì´í„° ì •ë¦¬ (6ê°œì›” ì´ìƒ, ì‚­ì œëœ íŒŒì¼)               â”‚   â”‚
â”‚  â”‚  7. embeddings.json.gz ìƒì„±                              â”‚   â”‚
â”‚  â”‚  8. Git commit & push [skip ci]                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Git Push
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GitHub Repository (Storage)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ output/embeddings.json.gz                                â”‚   â”‚
â”‚  â”‚  - ì •ì  ë²¡í„° íŒŒì¼ (gzip ì••ì¶•)                           â”‚   â”‚
â”‚  â”‚  - GitHub Raw URL ì œê³µ                                   â”‚   â”‚
â”‚  â”‚  - CDN ë¹„ìš© ì—†ìŒ                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTPS GET (GitHub Raw URL)
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Vercel Serverless (Runtime)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ API Server (15 Serverless Functions)                     â”‚   â”‚
â”‚  â”‚  - POST /api/ask                                         â”‚   â”‚
â”‚  â”‚  - GET /api/health                                       â”‚   â”‚
â”‚  â”‚  - GET /api/history                                      â”‚   â”‚
â”‚  â”‚  - GET /api/dashboard/*                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Vector Search Engine (File-based)                        â”‚   â”‚
â”‚  â”‚  1. embeddings.json.gz ë¡œë“œ (ë©”ëª¨ë¦¬ ìºì‹œ 5ë¶„)           â”‚   â”‚
â”‚  â”‚  2. OpenAI ì¿¼ë¦¬ ì„ë² ë”© ìƒì„±                             â”‚   â”‚
â”‚  â”‚  3. Brute-force Cosine Similarity                        â”‚   â”‚
â”‚  â”‚  4. Top-K ë¬¸ì„œ ë°˜í™˜ (k=10)                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ LLM Fallback Chain                                       â”‚   â”‚
â”‚  â”‚  Claude Sonnet 4 â†’ Gemini 1.5 Flash â†’ Mistral-7B        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ JSON Response
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   React Frontend (Vite + Vercel)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Pages                                                    â”‚   â”‚
â”‚  â”‚  - / (Q&A Page) - ChatGPT ìŠ¤íƒ€ì¼                        â”‚   â”‚
â”‚  â”‚  - /dashboard (Analytics) - í†µê³„ ëŒ€ì‹œë³´ë“œ               â”‚   â”‚
â”‚  â”‚  - /settings (Server Status) - ì„œë²„ ìƒíƒœ                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ State Management                                         â”‚   â”‚
â”‚  â”‚  - Jotai (Client State) - UI í† ê¸€, ê²€ìƒ‰ì–´               â”‚   â”‚
â”‚  â”‚  - TanStack Query (Server State) - API ìºì‹±             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ì„¤ê³„ ì›ì¹™

### 2.1 Zero Server Cost (ë¹„ìš© ìµœì†Œí™”)

**ëª©í‘œ**: ì›” $0 ìš´ì˜ë¹„

**êµ¬í˜„ ì „ëµ**:
- âœ… **ìƒì‹œ ì‹¤í–‰ ì„œë²„ ì—†ìŒ** â†’ Vercel Serverless Functions ì‚¬ìš©
- âœ… **ë²¡í„° DB ì„œë²„ ìš´ì˜ ì—†ìŒ** â†’ ì •ì  íŒŒì¼ (`embeddings.json.gz`) ì‚¬ìš©
- âœ… **CDN ë¹„ìš© ì—†ìŒ** â†’ GitHub Raw URL í™œìš©
- âœ… **ìºì‹œ ì„œë²„ ì—†ìŒ** â†’ ë©”ëª¨ë¦¬ ìºì‹œ (5ë¶„ TTL)

**ë¹„ìš© ê³„ì‚°**:
```
GitHub Actions: ë¬´ë£Œ (2,000ë¶„/ì›”, ì‹¤ì œ ì‚¬ìš©: ~120ë¶„/ì›”)
Vercel Hosting: ë¬´ë£Œ (Hobby Plan)
Supabase: ë¬´ë£Œ (Free Tier, Pingìœ¼ë¡œ ìœ ì§€)
OpenAI API: ~$2-5/ì›” (ì¿¼ë¦¬ ì„ë² ë”© + ë‹µë³€ ìƒì„±)
Claude API: ~$3-8/ì›” (ë‹µë³€ ìƒì„±, Gemini fallbackìœ¼ë¡œ ì ˆê°)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´ ìš´ì˜ë¹„: ~$5-13/ì›” (ëª©í‘œ: $10 ì´í•˜)
```

---

### 2.2 CI-First Architecture (CI ì¤‘ì‹¬ ì„¤ê³„)

**ëª©í‘œ**: ì„ë² ë”© ìƒì„±ì„ CI ë‹¨ê³„ë¡œ ì œí•œ

**êµ¬í˜„ ì „ëµ**:
- âœ… **ì„ë² ë”©ì€ GitHub Actionsì—ì„œë§Œ ì‹¤í–‰** (ë¡œì»¬ ê°œë°œ ì œì™¸)
- âœ… **ëŸ°íƒ€ì„ì€ ì½ê¸° ì „ìš© êµ¬ì¡°** (ë²¡í„° íŒŒì¼ ë¡œë“œë§Œ)
- âœ… **ì •ì  íŒŒì¼ ê¸°ë°˜ ë°°í¬** (Git commit & push)

**CI vs Runtime ì—­í•  ë¶„ë¦¬**:
| ì‘ì—… | CI (GitHub Actions) | Runtime (Vercel) |
|------|---------------------|------------------|
| ì„ë² ë”© ìƒì„± | âœ… | âŒ |
| ë²¡í„° ê²€ìƒ‰ | âŒ | âœ… |
| LLM ë‹µë³€ ìƒì„± | âŒ | âœ… |
| ë²¡í„° íŒŒì¼ ì €ì¥ | âœ… | âŒ |
| Q&A íˆìŠ¤í† ë¦¬ ì¡°íšŒ | âœ… (ì„ë² ë”©ìš©) | âœ… (í™”ë©´ í‘œì‹œìš©) |

---

### 2.3 Incremental Update (ì¦ë¶„ ì—…ë°ì´íŠ¸)

**ëª©í‘œ**: ì‹ ê·œ ë°ì´í„°ë§Œ ì²˜ë¦¬í•˜ì—¬ ë¹„ìš© ì ˆê°

**êµ¬í˜„ ì „ëµ**:
- âœ… **commit-state.jsonìœ¼ë¡œ ì¤‘ë³µ ë°©ì§€**
- âœ… **Idempotent ì²˜ë¦¬** (ì¬ì‹¤í–‰ ì•ˆì „ì„±)
- âœ… **GitHub Actions Artifacts í™œìš©** (90ì¼ ë³´ê´€)

**commit-state.json êµ¬ì¡°**:
```json
{
  "version": "2.0",
  "repositories": {
    "owner/repo": {
      "lastCommitSha": "abc123...",
      "lastTreeSha": "def456...",
      "lastUpdated": "2026-01-05T10:00:00Z"
    }
  },
  "lastQATimestamp": "2026-01-05T10:00:00Z",
  "lastCleanupRun": "2026-01-05T10:00:00Z",
  "lastUpdated": "2026-01-05T10:00:00Z"
}
```

---

## 3. ë°ì´í„° íë¦„

### 3.1 CI Pipeline (Offline - ì£¼ê°„ ì‹¤í–‰)

```mermaid
sequenceDiagram
    participant GHA as GitHub Actions
    participant GitHub as GitHub API
    participant Supabase as Supabase DB
    participant HF as Hugging Face
    participant Repo as Git Repository

    Note over GHA: ë§¤ì£¼ í† ìš”ì¼ 18:00 UTC

    GHA->>Repo: Load target-repos.json
    GHA->>Repo: Load commit-state.json

    loop For each repository
        GHA->>GitHub: Fetch latest commits
        GitHub-->>GHA: Commit list

        Note over GHA: Filter new commits only

        GHA->>GitHub: Fetch commit details + diff
        GitHub-->>GHA: Commit data

        GHA->>GitHub: Fetch repository files
        GitHub-->>GHA: Source code
    end

    GHA->>Supabase: Query new Q&A history
    Supabase-->>GHA: Q&A data

    GHA->>HF: Generate embeddings (all-MiniLM-L6-v2)
    HF-->>GHA: 384d vectors

    GHA->>Supabase: Insert to pgvector
    Supabase-->>GHA: Success

    Note over GHA: Data Cleanup
    GHA->>GHA: Remove old data (6+ months)
    GHA->>GitHub: Check deleted files
    GHA->>GHA: Remove deleted file embeddings

    GHA->>Supabase: Fetch all embeddings
    Supabase-->>GHA: All vectors

    GHA->>GHA: Generate embeddings.json
    GHA->>GHA: Compress to .json.gz

    GHA->>Repo: Git commit + push [skip ci]
    GHA->>Repo: Update commit-state.json

    Note over Repo: Vector file available via GitHub Raw URL
```

---

### 3.2 Runtime Flow (Online - Q&A ìš”ì²­)

```mermaid
sequenceDiagram
    participant User as User Browser
    participant React as React Frontend
    participant API as Vercel API
    participant GitHub as GitHub Raw URL
    participant Supabase as Supabase DB
    participant LLM as LLM (Claude/Gemini)

    User->>React: Enter question
    React->>API: POST /api/ask {question}

    API->>API: Check cache (5min TTL)

    alt Cache Miss
        API->>GitHub: GET embeddings.json.gz
        GitHub-->>API: Vector file
        API->>API: Decompress + cache
    end

    API->>API: Generate query embedding (OpenAI)
    API->>API: Cosine similarity search
    API->>API: Get top-K documents (k=10)

    API->>Supabase: Query Q&A history (context)
    Supabase-->>API: Previous Q&A

    API->>LLM: Generate answer (Claude)

    alt Claude Success
        LLM-->>API: Answer
    else Claude Fail
        API->>LLM: Try Gemini
        alt Gemini Success
            LLM-->>API: Answer
        else Gemini Fail
            API->>LLM: Try Mistral
            alt Mistral Success
                LLM-->>API: Answer
            else All Fail
                API->>API: Return error message
            end
        end
    end

    API->>Supabase: Save Q&A to history
    Supabase-->>API: Success

    API-->>React: JSON response
    React-->>User: Display answer + sources
```

---

## 4. ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜

### 4.1 í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸

```
src/
â”œâ”€â”€ App.tsx                     # React Router ì„¤ì •
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ QAPage.tsx              # Q&A í˜ì´ì§€ (/)
â”‚   â”œâ”€â”€ DashboardPage.tsx       # ëŒ€ì‹œë³´ë“œ (/dashboard)
â”‚   â””â”€â”€ SettingsPage.tsx        # ì„¤ì • (/settings)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â””â”€â”€ ServerStatus.tsx    # í—¤ë” ìƒíƒœ í‘œì‹œ
â”‚   â”œâ”€â”€ qa/
â”‚   â”‚   â”œâ”€â”€ MessageList.tsx     # ë©”ì‹œì§€ ëª©ë¡
â”‚   â”‚   â”œâ”€â”€ InputBox.tsx        # ì§ˆë¬¸ ì…ë ¥
â”‚   â”‚   â””â”€â”€ SourceCard.tsx      # ì†ŒìŠ¤ ì¸ìš©
â”‚   â””â”€â”€ dashboard/
â”‚       â”œâ”€â”€ StatsCard.tsx       # í†µê³„ ì¹´ë“œ
â”‚       â””â”€â”€ Chart.tsx           # Recharts ë˜í¼
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useQueries.ts           # TanStack Query hooks
â”œâ”€â”€ stores/
â”‚   â””â”€â”€ uiStore.ts              # Jotai atoms
â”œâ”€â”€ api/
â”‚   â””â”€â”€ client.ts               # API í´ë¼ì´ì–¸íŠ¸
â””â”€â”€ types/
    â””â”€â”€ index.ts                # TypeScript íƒ€ì…
```

---

### 4.2 ë°±ì—”ë“œ API ì—”ë“œí¬ì¸íŠ¸

```
api/
â”œâ”€â”€ _lib/                       # ê³µìœ  ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ cors.ts                 # CORS ì„¤ì •
â”‚   â”œâ”€â”€ errorHandler.ts         # ì—ëŸ¬ í•¸ë“¤ë§
â”‚   â”œâ”€â”€ responseFormatter.ts    # ì‘ë‹µ í¬ë§·íŒ…
â”‚   â””â”€â”€ healthCheck.ts          # Health check ë¡œì§
â”œâ”€â”€ ask.ts                      # POST /api/ask
â”œâ”€â”€ health.ts                   # GET /api/health
â”œâ”€â”€ migration.ts                # GET /api/migration
â”œâ”€â”€ history/
â”‚   â”œâ”€â”€ index.ts                # GET /api/history
â”‚   â”œâ”€â”€ [id].ts                 # GET /api/history/:id
â”‚   â””â”€â”€ session/
â”‚       â””â”€â”€ [sessionId].ts      # GET /api/history/session/:sessionId
â””â”€â”€ dashboard/
    â”œâ”€â”€ summary.ts              # GET /api/dashboard/summary
    â”œâ”€â”€ daily.ts                # GET /api/dashboard/daily
    â”œâ”€â”€ categories.ts           # GET /api/dashboard/categories
    â””â”€â”€ sources.ts              # GET /api/dashboard/sources
```

---

### 4.3 ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ (Shared)

```
shared/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase.ts             # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â””â”€â”€ supabaseMigration.ts    # DB ë§ˆì´ê·¸ë ˆì´ì…˜
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ qa/
â”‚   â”‚   â”œâ”€â”€ answer.ts           # LLM ë‹µë³€ ìƒì„±
â”‚   â”‚   â””â”€â”€ classifier.ts       # ì§ˆë¬¸ ë¶„ë¥˜
â”‚   â””â”€â”€ vector-store/
â”‚       â”œâ”€â”€ fileVectorStore.ts  # íŒŒì¼ ê¸°ë°˜ ë²¡í„° ê²€ìƒ‰
â”‚       â”œâ”€â”€ embeddingService.ts # ì„ë² ë”© ìƒì„±
â”‚       â””â”€â”€ qaHistoryVectorStore.ts # Q&A íˆìŠ¤í† ë¦¬ ë²¡í„°
â””â”€â”€ models/
    â”œâ”€â”€ EmbeddingItem.ts        # ì„ë² ë”© ì•„ì´í…œ íƒ€ì…
    â””â”€â”€ SearchResult.ts         # ê²€ìƒ‰ ê²°ê³¼ íƒ€ì…
```

---

## 5. ë°°í¬ ì•„í‚¤í…ì²˜

### 5.1 í”„ë¡œë•ì…˜ í™˜ê²½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Production Env                        â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Vercel CDN     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚ GitHub Pages   â”‚          â”‚
â”‚  â”‚ (Frontend)     â”‚         â”‚ (Static Assets)â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚          â”‚                                               â”‚
â”‚          â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Vercel Edge    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚ GitHub Raw URL â”‚          â”‚
â”‚  â”‚ (Serverless)   â”‚         â”‚ (Vector File)  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚          â”‚                                               â”‚
â”‚          â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Supabase       â”‚         â”‚ Claude/Gemini  â”‚          â”‚
â”‚  â”‚ (Database)     â”‚         â”‚ (LLM APIs)     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 í™˜ê²½ë³„ URL

| í™˜ê²½ | Frontend | API | Vector File |
|------|----------|-----|-------------|
| **Local** | http://localhost:5173 | http://localhost:3001 | `output/embeddings.json.gz` (ë¡œì»¬ íŒŒì¼) |
| **Production** | https://nlp-portfolio.vercel.app | https://nlp-portfolio.vercel.app/api | GitHub Raw URL |

---

## 6. ë‹¤ìŒ ë‹¨ê³„

ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ë¥¼ ì´í•´í–ˆë‹¤ë©´, ë‹¤ìŒ ë¬¸ì„œë¡œ ì§„í–‰í•˜ì„¸ìš”:

ğŸ‘‰ **[03_í™˜ê²½_ì„¤ì •.md](./03_í™˜ê²½_ì„¤ì •.md)** - ê°œë°œ í™˜ê²½ ì¤€ë¹„

---

## 7. ê´€ë ¨ ë¬¸ì„œ

- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ìƒì„¸ ì„¤ê³„](../02_architecture/01_System_Architecture.md)
- [ë°ì´í„° íë¦„](../../CLAUDE.md#data-flow)

---

**ë¬¸ì„œ ì‘ì„± ì™„ë£Œ**: 2026-01-05
**ì´ì „ ë¬¸ì„œ**: [01_ê¸°ìˆ _ìŠ¤íƒ.md](./01_ê¸°ìˆ _ìŠ¤íƒ.md)
**ë‹¤ìŒ ë¬¸ì„œ**: [03_í™˜ê²½_ì„¤ì •.md](./03_í™˜ê²½_ì„¤ì •.md)
